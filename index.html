<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Document</title>
</head>
<body>
	<p style="font-size: 200%">
	Select the number of players &nbsp; 
	<input type="button" id="btn_player_5" value="5" style="font-size:100%" onclick="set_number_of_players(5)" /> 
	<input type="button" id="btn_player_6" value="6" style="font-size:100%" onclick="set_number_of_players(6)" /> 
	<input type="button" id="btn_player_7" value="7" style="font-size:100%" onclick="set_number_of_players(7)" /> 
	<input type="button" id="btn_player_8" value="8" style="font-size:100%" onclick="set_number_of_players(8)" /> 
	<input type="button" id="btn_player_9" value="9" style="font-size:100%" onclick="set_number_of_players(9)" /> 
	<input type="button" id="btn_player_10" value="10" style="font-size:100%" onclick="set_number_of_players(10)" /> 
	</p> 
	
	<p style="font-size: 200%">
	We have <input type="button" id="remain_card_number" value="17" style="font-size:100%" /> policy cards.
	</p> <br>

	<p style="font-size: 200%; color:blue">
	Liberal Track <br>
	<img src="liberal.png" id="track_liberal_0" style="width: 14%; height: auto; visibility: hidden;" />
	<img src="liberal.png" id="track_liberal_1" style="width: 14%; height: auto; visibility: hidden" />
	<img src="liberal.png" id="track_liberal_2" style="width: 14%; height: auto; visibility: hidden" />
	<img src="liberal.png" id="track_liberal_3" style="width: 14%; height: auto; visibility: hidden" />
	<img src="liberal.png" id="track_liberal_4" style="width: 14%; height: auto; visibility: hidden" /> <br>

	<p style="font-size: 200%; color:red">
	Fascist Track <br>
	<img src="fascist.png" id="track_fascist_0" style="width: 14%; height: auto; visibility: hidden" />
	<img src="fascist.png" id="track_fascist_0" style="width: 14%; height: auto; visibility: hidden" />
	<img src="fascist.png" id="track_fascist_0" style="width: 14%; height: auto; visibility: hidden" />
	<img src="fascist.png" id="track_fascist_0" style="width: 14%; height: auto; visibility: hidden" />
	<img src="fascist.png" id="track_fascist_0" style="width: 14%; height: auto; visibility: hidden" />
	<img src="fascist.png" id="track_fascist_0" style="width: 14%; height: auto; visibility: hidden" /> <br>
	<p style="font-size: 200%"><input type="button" style="font-size:100%" id="btn_blue_cards" value="0" /> Liberal policy (or policies) and
	<br>
	<input type="button" style="font-size:100%" id="btn_red_cards" value="0" /> Fascist policy (or policies) are enacted.</p>
	<br>
	<p style="font-size: 200%">
	<input type="button" id="btn_policy"   value="Start a legislative session" style="font-size:100%; width:50%"
		onClick="func_policy()" /></p>
	<br>
	<br>
	<br>
	<br>
	<img  id="btn_cand_card_0" style="width: 30%; height: auto;" onClick="func_cand_card(0);" />
	<img  id="btn_cand_card_1" style="width: 30%; height: auto;" onClick="func_cand_card(1);" />
	<img  id="btn_cand_card_2" style="width: 30%; height: auto;" onClick="func_cand_card(2);" />
</body>

<script>

	var arr_liberal_track=new Array();
	var arr_fascist_track=new Array();

	arr_liberal_track[0]='track_liberal_0';
	arr_liberal_track[1]='track_liberal_1';
	arr_liberal_track[2]='track_liberal_2';
	arr_liberal_track[3]='track_liberal_3';
	arr_liberal_track[4]='track_liberal_4';

	arr_fascist_track[0]='track_fascist_0';
	arr_fascist_track[1]='track_fascist_1';
	arr_fascist_track[2]='track_fascist_2';
	arr_fascist_track[3]='track_fascist_3';
	arr_fascist_track[4]='track_fascist_4';
	arr_fascist_track[5]='track_fascist_5';
	
	var m_number_of_player;
	var m_count = 3;
	var m_remain_cards=17;
	var used_cards = new Array();
	for (var i = 0; i < 17; i++) {
		used_cards[i] = 0;
	}

	var removed_cards = new Array();
	for (var i = 0; i < 17; i++) {
		removed_cards[i] = 0;
	}

	var arr_ids = new Array();

	var arr_btn_cand_card = new Array();
	arr_btn_cand_card[0] = 'btn_cand_card_0';
	arr_btn_cand_card[1] = 'btn_cand_card_1';
	arr_btn_cand_card[2] = 'btn_cand_card_2';
	
	for (var i = 0; i < 3; i++) {
		document.getElementById(arr_btn_cand_card[i]).style.visibility = 'hidden';
	}

	function set_number_of_players(x)
	{
		var arr_temp=new Array();
		arr_temp[0]='btn_player_5';
		arr_temp[1]='btn_player_6';
		arr_temp[2]='btn_player_7';
		arr_temp[3]='btn_player_8';
		arr_temp[4]='btn_player_9';
		arr_temp[5]='btn_player_10';
		m_number_of_player=x;
		for (var index = 0; index < 6; index++) {
			if (x-5!=index)	{
				document.getElementById(arr_temp[index]).style.display="none";
			}		
		}
	}	

	function func_policy() {
		if (m_remain_cards<3){
			m_remain_cards=0;
			alert("Shuffle the discard pile");
			
			for (var i = 0; i < 17; i++) {
				if(removed_cards[i]==0)	{
					used_cards[i]=0;
					m_remain_cards++;
				}
			}
			document.getElementById('remain_card_number').value = String(m_remain_cards);
		}
		
		alert("Make sure President look in secret.")
		
			

		for (var i = 0; i < 3; i++) {
			document.getElementById(arr_btn_cand_card[i]).style.visibility = 'visible';
		}
		//		alert("here");

		for (var i = 0; i < 3; i++) {
			var m_gen = Math.floor(Math.random() * (17));
			while (used_cards[m_gen] == 1) {
				m_gen = Math.floor(Math.random() * (17));
			}
			used_cards[m_gen] = 1;
			arr_ids[i] = m_gen;

			if (m_gen < 6) // blue cards
			{
				document.getElementById(arr_btn_cand_card[i]).src = 'liberal.png';
			} else {
				document.getElementById(arr_btn_cand_card[i]).src = 'fascist.png';
			}
		}
		//		alert("hi");
		
		//alert("used_cards:\n0 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16\n"+
				//used_cards[0]+" "+
				//used_cards[1]+" "+
				//used_cards[2]+" "+
				//used_cards[3]+" "+
				//used_cards[4]+" "+
				//used_cards[5]+" "+
				//used_cards[6]+" "+
				//used_cards[7]+" "+
				//used_cards[8]+" "+
				//used_cards[9]+" "+
				//used_cards[10]+"  "+
				//used_cards[11]+"  "+
				//used_cards[12]+"  "+
				//used_cards[13]+"  "+
				//used_cards[14]+"  "+
				//used_cards[15]+"  "+
				//used_cards[16]
				//);
		m_remain_cards=m_remain_cards-3;
		
		//alert(arr_ids[0]+","+arr_ids[1]+","+arr_ids[2]);
	}

	function func_announce_result()
	{
		for (var i = 0; i < 3; i++) {
				if (arr_ids[i] != -1) {
//					alert(i);
					document.getElementById(arr_btn_cand_card[i]).style.visibility = 'hidden';
					
					if (arr_ids[i] < 6) {
						var temp = Number(document
								.getElementById('btn_blue_cards').value);
						document.getElementById('btn_blue_cards').value = String(temp + 1);
						document.getElementById(arr_liberal_track[temp]).style.visibility='visible';

						alert("A liberal policy is enacted.");

						if (temp==4){
							alert("Players on the Liberal team win!")
						}
							
					} else {
						var temp = Number(document
								.getElementById('btn_red_cards').value);
						document.getElementById('btn_red_cards').value = String(temp + 1);
						document.getElementById(arr_fascist_track[temp]).style.visibility='visible';

						alert("A fascist policy is enacted.");

						if (temp==5){
							alert("Players on the Fascist team win!")
						}
					}
					
					var temp = Number(document
							.getElementById('remain_card_number').value);
					document.getElementById('remain_card_number').value = String(temp -3);
					removed_cards[arr_ids[i]]=1;


					break;
				}
			}
			m_count = 3;

	}
	function func_cand_card(x) {
		document.getElementById(arr_btn_cand_card[x]).style.visibility = 'hidden';
		arr_ids[x] = -1;
//		alert(arr_ids[0]+","+arr_ids[1]+","+arr_ids[2]);
		m_count = m_count - 1;
		if (m_count == 1) {
			func_announce_result();
		}

	}
</script>

</html>

